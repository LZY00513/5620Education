{"ast":null,"code":"\"use strict\";\n\nrequire(\"core-js/modules/es.object.define-property.js\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.render = render;\nvar _vue = require(\"vue\");\nvar _hoisted_1 = {\n  key: 0,\n  \"class\": \"center_view\"\n};\nvar _hoisted_2 = {\n  style: {\n    \"text-align\": \"left\",\n    \"width\": \"100%\",\n    \"margin-bottom\": \"20px\"\n  }\n};\nvar _hoisted_3 = {\n  key: 0\n};\nvar _hoisted_4 = {\n  style: {\n    \"width\": \"100%\",\n    \"display\": \"flex\",\n    \"justify-content\": \"space-between\",\n    \"align-items\": \"center\"\n  }\n};\nvar _hoisted_5 = {\n  style: {\n    \"font-weight\": \"700\",\n    \"font-size\": \"16px\"\n  }\n};\nvar _hoisted_6 = {\n  style: {\n    \"padding-right\": \"30px\"\n  }\n};\nvar _hoisted_7 = {\n  style: {\n    \"display\": \"flex\",\n    \"justify-content\": \"center\",\n    \"align-items\": \"center\",\n    \"margin-bottom\": \"20px\"\n  }\n};\nvar _hoisted_8 = /*#__PURE__*/(0, _vue.createElementVNode)(\"div\", null, \"父级菜单：\", -1 /* HOISTED */);\nvar _hoisted_9 = {\n  style: {\n    \"width\": \"100%\",\n    \"text-align\": \"center\"\n  }\n};\nfunction render(_ctx, _cache, $props, $setup, $data, $options) {\n  var _component_el_button = (0, _vue.resolveComponent)(\"el-button\");\n  var _component_el_table_column = (0, _vue.resolveComponent)(\"el-table-column\");\n  var _component_el_checkbox = (0, _vue.resolveComponent)(\"el-checkbox\");\n  var _component_el_checkbox_group = (0, _vue.resolveComponent)(\"el-checkbox-group\");\n  var _component_el_table = (0, _vue.resolveComponent)(\"el-table\");\n  var _component_el_collapse_item = (0, _vue.resolveComponent)(\"el-collapse-item\");\n  var _component_el_collapse = (0, _vue.resolveComponent)(\"el-collapse\");\n  var _component_el_tab_pane = (0, _vue.resolveComponent)(\"el-tab-pane\");\n  var _component_el_tabs = (0, _vue.resolveComponent)(\"el-tabs\");\n  var _component_el_option = (0, _vue.resolveComponent)(\"el-option\");\n  var _component_el_select = (0, _vue.resolveComponent)(\"el-select\");\n  var _component_el_dialog = (0, _vue.resolveComponent)(\"el-dialog\");\n  return (0, _vue.openBlock)(), (0, _vue.createElementBlock)(\"div\", null, [$setup.btnAuth('menu', '菜单管理') ? ((0, _vue.openBlock)(), (0, _vue.createElementBlock)(\"div\", _hoisted_1, [(0, _vue.createElementVNode)(\"div\", _hoisted_2, [(0, _vue.createVNode)(_component_el_button, {\n    type: \"primary\",\n    style: {\n      \"width\": \"100px\"\n    },\n    onClick: $setup.save\n  }, {\n    \"default\": (0, _vue.withCtx)(function () {\n      return [(0, _vue.createTextVNode)(\"保存修改\")];\n    }),\n    _: 1 /* STABLE */\n  })]), (0, _vue.createVNode)(_component_el_tabs, {\n    type: \"border-card\",\n    modelValue: $setup.role_index,\n    \"onUpdate:modelValue\": _cache[1] || (_cache[1] = function ($event) {\n      return $setup.role_index = $event;\n    }),\n    onTabChange: $setup.tabClick\n  }, {\n    \"default\": (0, _vue.withCtx)(function () {\n      return [((0, _vue.openBlock)(true), (0, _vue.createElementBlock)(_vue.Fragment, null, (0, _vue.renderList)($setup.menus, function (role, r_index) {\n        return (0, _vue.openBlock)(), (0, _vue.createBlock)(_component_el_tab_pane, {\n          key: role.roleName,\n          label: role.roleName,\n          name: r_index\n        }, {\n          \"default\": (0, _vue.withCtx)(function () {\n            return [r_index == $setup.role_index ? ((0, _vue.openBlock)(), (0, _vue.createElementBlock)(\"div\", _hoisted_3, [(0, _vue.createVNode)(_component_el_collapse, {\n              modelValue: $setup.collapse_default,\n              \"onUpdate:modelValue\": _cache[0] || (_cache[0] = function ($event) {\n                return $setup.collapse_default = $event;\n              })\n            }, {\n              \"default\": (0, _vue.withCtx)(function () {\n                return [((0, _vue.openBlock)(true), (0, _vue.createElementBlock)(_vue.Fragment, null, (0, _vue.renderList)(role.backMenu, function (table, t_index) {\n                  return (0, _vue.openBlock)(), (0, _vue.createBlock)(_component_el_collapse_item, {\n                    name: table.menu\n                  }, {\n                    title: (0, _vue.withCtx)(function () {\n                      return [(0, _vue.createElementVNode)(\"div\", _hoisted_4, [(0, _vue.createElementVNode)(\"div\", _hoisted_5, (0, _vue.toDisplayString)(table.menu), 1 /* TEXT */), (0, _vue.createElementVNode)(\"div\", _hoisted_6, [(0, _vue.createVNode)(_component_el_button, {\n                        size: \"small\",\n                        onClick: (0, _vue.withModifiers)(function ($event) {\n                          return $setup.moveUp(role.backMenu, t_index);\n                        }, [\"stop\"])\n                      }, {\n                        \"default\": (0, _vue.withCtx)(function () {\n                          return [(0, _vue.createTextVNode)(\" 上移 \")];\n                        }),\n                        _: 2 /* DYNAMIC */\n                      }, 1032 /* PROPS, DYNAMIC_SLOTS */, [\"onClick\"]), (0, _vue.createVNode)(_component_el_button, {\n                        size: \"small\",\n                        type: \"primary\",\n                        onClick: (0, _vue.withModifiers)(function ($event) {\n                          return $setup.changeName(table, role.backMenu);\n                        }, [\"stop\"])\n                      }, {\n                        \"default\": (0, _vue.withCtx)(function () {\n                          return [(0, _vue.createTextVNode)(\" 修改菜单名 \")];\n                        }),\n                        _: 2 /* DYNAMIC */\n                      }, 1032 /* PROPS, DYNAMIC_SLOTS */, [\"onClick\"])])])];\n                    }),\n                    \"default\": (0, _vue.withCtx)(function () {\n                      return [(0, _vue.createVNode)(_component_el_table, {\n                        data: table.child,\n                        \"show-header\": false,\n                        style: {\n                          \"width\": \"100%\",\n                          \"background\": \"#edeef0\",\n                          \"border\": \"1px solid #ddd\"\n                        }\n                      }, {\n                        \"default\": (0, _vue.withCtx)(function () {\n                          return [(0, _vue.createVNode)(_component_el_table_column, {\n                            prop: \"menu\",\n                            label: \"菜单名\",\n                            width: \"180\"\n                          }), (0, _vue.createVNode)(_component_el_table_column, {\n                            label: \"权限\"\n                          }, {\n                            \"default\": (0, _vue.withCtx)(function (scope) {\n                              return [(0, _vue.createVNode)(_component_el_checkbox_group, {\n                                modelValue: scope.row.buttons,\n                                \"onUpdate:modelValue\": function onUpdateModelValue($event) {\n                                  return scope.row.buttons = $event;\n                                }\n                              }, {\n                                \"default\": (0, _vue.withCtx)(function () {\n                                  return [((0, _vue.openBlock)(true), (0, _vue.createElementBlock)(_vue.Fragment, null, (0, _vue.renderList)(scope.row.allButtons, function (item) {\n                                    return (0, _vue.openBlock)(), (0, _vue.createBlock)(_component_el_checkbox, {\n                                      label: item,\n                                      value: item\n                                    }, null, 8 /* PROPS */, [\"label\", \"value\"]);\n                                  }), 256 /* UNKEYED_FRAGMENT */))];\n                                }),\n\n                                _: 2 /* DYNAMIC */\n                              }, 1032 /* PROPS, DYNAMIC_SLOTS */, [\"modelValue\", \"onUpdate:modelValue\"])];\n                            }),\n                            _: 1 /* STABLE */\n                          }), (0, _vue.createVNode)(_component_el_table_column, {\n                            label: \"操作\"\n                          }, {\n                            \"default\": (0, _vue.withCtx)(function (scope) {\n                              return [(0, _vue.createVNode)(_component_el_button, {\n                                size: \"small\",\n                                onClick: function onClick($event) {\n                                  return $setup.moveUp(table.child, scope.$index);\n                                }\n                              }, {\n                                \"default\": (0, _vue.withCtx)(function () {\n                                  return [(0, _vue.createTextVNode)(\" 上移 \")];\n                                }),\n                                _: 2 /* DYNAMIC */\n                              }, 1032 /* PROPS, DYNAMIC_SLOTS */, [\"onClick\"]), (0, _vue.createVNode)(_component_el_button, {\n                                size: \"small\",\n                                type: \"primary\",\n                                onClick: function onClick($event) {\n                                  return $setup.changeName(scope.row, table.child);\n                                }\n                              }, {\n                                \"default\": (0, _vue.withCtx)(function () {\n                                  return [(0, _vue.createTextVNode)(\" 修改菜单名 \")];\n                                }),\n                                _: 2 /* DYNAMIC */\n                              }, 1032 /* PROPS, DYNAMIC_SLOTS */, [\"onClick\"]), (0, _vue.createVNode)(_component_el_button, {\n                                size: \"small\",\n                                type: \"warning\",\n                                onClick: function onClick($event) {\n                                  return $setup.toMove(t_index, scope.$index);\n                                }\n                              }, {\n                                \"default\": (0, _vue.withCtx)(function () {\n                                  return [(0, _vue.createTextVNode)(\" 修改父级菜单 \")];\n                                }),\n                                _: 2 /* DYNAMIC */\n                              }, 1032 /* PROPS, DYNAMIC_SLOTS */, [\"onClick\"])];\n                            }),\n                            _: 2 /* DYNAMIC */\n                          }, 1024 /* DYNAMIC_SLOTS */)];\n                        }),\n\n                        _: 2 /* DYNAMIC */\n                      }, 1032 /* PROPS, DYNAMIC_SLOTS */, [\"data\"])];\n                    }),\n                    _: 2 /* DYNAMIC */\n                  }, 1032 /* PROPS, DYNAMIC_SLOTS */, [\"name\"]);\n                }), 256 /* UNKEYED_FRAGMENT */))];\n              }),\n\n              _: 2 /* DYNAMIC */\n            }, 1032 /* PROPS, DYNAMIC_SLOTS */, [\"modelValue\"])])) : (0, _vue.createCommentVNode)(\"v-if\", true)];\n          }),\n          _: 2 /* DYNAMIC */\n        }, 1032 /* PROPS, DYNAMIC_SLOTS */, [\"label\", \"name\"]);\n      }), 128 /* KEYED_FRAGMENT */))];\n    }),\n\n    _: 1 /* STABLE */\n  }, 8 /* PROPS */, [\"modelValue\"])])) : (0, _vue.createCommentVNode)(\"v-if\", true), (0, _vue.createVNode)(_component_el_dialog, {\n    title: \"修改父级菜单\",\n    modelValue: $setup.dialogVisible,\n    \"onUpdate:modelValue\": _cache[3] || (_cache[3] = function ($event) {\n      return $setup.dialogVisible = $event;\n    }),\n    width: \"30%\"\n  }, {\n    \"default\": (0, _vue.withCtx)(function () {\n      return [(0, _vue.createElementVNode)(\"div\", _hoisted_7, [_hoisted_8, (0, _vue.createVNode)(_component_el_select, {\n        modelValue: $setup.n_first_index,\n        \"onUpdate:modelValue\": _cache[2] || (_cache[2] = function ($event) {\n          return $setup.n_first_index = $event;\n        }),\n        placeholder: \"请选择父级菜单\",\n        style: {\n          \"width\": \"200px\"\n        }\n      }, {\n        \"default\": (0, _vue.withCtx)(function () {\n          return [((0, _vue.openBlock)(true), (0, _vue.createElementBlock)(_vue.Fragment, null, (0, _vue.renderList)($setup.menus[$setup.role_index].backMenu, function (item, index) {\n            return (0, _vue.openBlock)(), (0, _vue.createBlock)(_component_el_option, {\n              key: item.menu,\n              label: item.menu,\n              value: index\n            }, null, 8 /* PROPS */, [\"label\", \"value\"]);\n          }), 128 /* KEYED_FRAGMENT */))];\n        }),\n\n        _: 1 /* STABLE */\n      }, 8 /* PROPS */, [\"modelValue\"])]), (0, _vue.createElementVNode)(\"div\", _hoisted_9, [(0, _vue.createVNode)(_component_el_button, {\n        type: \"primary\",\n        onClick: $setup.moveTo\n      }, {\n        \"default\": (0, _vue.withCtx)(function () {\n          return [(0, _vue.createTextVNode)(\"确 定\")];\n        }),\n        _: 1 /* STABLE */\n      })])];\n    }),\n\n    _: 1 /* STABLE */\n  }, 8 /* PROPS */, [\"modelValue\"])]);\n}","map":{"version":3,"mappings":"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","names":["style","$setup","_hoisted_1","_hoisted_2","_component_el_button","type","onClick","_component_el_tabs","onTabChange","_Fragment","role","r_index","_component_el_tab_pane","roleName","label","name","_component_el_collapse","backMenu","table","t_index","_component_el_collapse_item","menu","title","_hoisted_4","_hoisted_5","_hoisted_6","size","_component_el_table","data","child","_component_el_table_column","prop","width","scope","_component_el_checkbox_group","row","buttons","allButtons","item","_component_el_checkbox","value","$index","_component_el_dialog","_hoisted_7","_hoisted_8","_component_el_select","placeholder","index","_component_el_option","key","_hoisted_9"],"sourceRoot":"","sources":["/Users/xinxiao/Desktop/education_ai/manage_code/src/views/menu_manage/list.vue"],"sourcesContent":["<template>\r\n    <div>\r\n        <div class=\"center_view\" v-if=\"btnAuth('menu','菜单管理')\">\r\n            <div style=\"text-align: left;width: 100%;margin-bottom: 20px\">\r\n                <el-button type=\"primary\" style=\"width: 100px\" @click=\"save\">保存修改</el-button>\r\n            </div>\r\n            <el-tabs type=\"border-card\" v-model=\"role_index\" @tab-change=\"tabClick\">\r\n                <template v-for=\"(role,r_index) in menus\" :key=\"role.roleName\">\r\n                    <el-tab-pane :label=\"role.roleName\" :name=\"r_index\">\r\n                        <div v-if=\"r_index==role_index\">\r\n                            <el-collapse v-model=\"collapse_default\">\r\n                                <el-collapse-item v-for=\"(table,t_index) in role.backMenu\" :name=\"table.menu\">\r\n                                    <template #title>\r\n                                        <div style=\"width: 100%;display: flex;justify-content: space-between;align-items: center\">\r\n                                            <div style=\"font-weight: 700;font-size: 16px\">{{table.menu}}</div>\r\n                                            <div style=\"padding-right: 30px\">\r\n                                                <el-button size=\"small\" @click.stop=\"moveUp(role.backMenu,t_index)\">\r\n                                                    上移\r\n                                                </el-button>\r\n                                                <el-button size=\"small\" type=\"primary\" @click.stop=\"changeName(table,role.backMenu)\">\r\n                                                    修改菜单名\r\n                                                </el-button>\r\n                                            </div>\r\n                                        </div>\r\n                                    </template>\r\n                                    <el-table\r\n                                        :data=\"table.child\"\r\n                                        :show-header=\"false\"\r\n                                        style=\"width: 100%;background: #edeef0;border: 1px solid #ddd\">\r\n                                        <el-table-column\r\n                                            prop=\"menu\"\r\n                                            label=\"菜单名\"\r\n                                            width=\"180\">\r\n                                        </el-table-column>\r\n                                        <el-table-column label=\"权限\">\r\n                                            <template #default=\"scope\">\r\n                                                <el-checkbox-group v-model=\"scope.row.buttons\">\r\n                                                    <el-checkbox v-for=\"item in scope.row.allButtons\" :label=\"item\" :value=\"item\" />\r\n                                                </el-checkbox-group>\r\n                                            </template>\r\n                                        </el-table-column>\r\n                                        <el-table-column label=\"操作\">\r\n                                            <template #default=\"scope\">\r\n                                                <el-button size=\"small\" @click=\"moveUp(table.child,scope.$index)\">\r\n                                                    上移\r\n                                                </el-button>\r\n                                                <el-button size=\"small\" type=\"primary\" @click=\"changeName(scope.row,table.child)\">\r\n                                                    修改菜单名\r\n                                                </el-button>\r\n                                                <el-button size=\"small\"\r\n                                                           type=\"warning\"\r\n                                                           @click=\"toMove(t_index,scope.$index)\">\r\n                                                    修改父级菜单\r\n                                                </el-button>\r\n                                            </template>\r\n                                        </el-table-column>\r\n                                    </el-table>\r\n                                </el-collapse-item>\r\n                            </el-collapse>\r\n                        </div>\r\n                    </el-tab-pane>\r\n                </template>\r\n            </el-tabs>\r\n        </div>\r\n        <el-dialog\r\n            title=\"修改父级菜单\"\r\n            v-model=\"dialogVisible\"\r\n            width=\"30%\">\r\n            <div style=\"display: flex;justify-content: center;align-items: center;margin-bottom: 20px\">\r\n                <div>父级菜单：</div>\r\n                <el-select v-model=\"n_first_index\" placeholder=\"请选择父级菜单\" style=\"width: 200px\">\r\n                    <el-option\r\n                        v-for=\"(item,index) in menus[role_index].backMenu\"\r\n                        :key=\"item.menu\"\r\n                        :label=\"item.menu\"\r\n                        :value=\"index\">\r\n                    </el-option>\r\n                </el-select>\r\n            </div>\r\n            <div style=\"width: 100%;text-align: center\">\r\n                <el-button type=\"primary\" @click=\"moveTo\">确 定</el-button>\r\n            </div>\r\n        </el-dialog>\r\n    </div>\r\n</template>\r\n<script setup>\r\nimport {getCurrentInstance,ref} from \"vue\";\r\nimport { ElMessage, ElMessageBox } from 'element-plus'\r\n\r\nconst context = getCurrentInstance()?.appContext.config.globalProperties;\r\n\r\n//权限验证\r\nconst btnAuth = (e,a)=>{\r\n    return context?.$toolUtil.isAuth(e,a)\r\n}\r\n\r\nconst menus = ref([])\r\nconst role_index = ref(0)   //当前选中的角色index\r\nconst first_index = ref(0) //当前选中的一级菜单index\r\nconst collapse_default = ref([])    //展开的collapse\r\nconst getMenus = ()=>{\r\n    context.$http.get('menu/lists').then(res=>{\r\n        menus.value = JSON.parse(res.data.data[0].menujson)\r\n        collapse_default.value = menus.value[role_index.value].backMenu.map(item=>item.menu)\r\n    })\r\n}\r\ngetMenus()\r\n\r\nconst tabClick = ()=>{\r\n    collapse_default.value = menus.value[role_index.value].backMenu.map(item=>item.menu)\r\n}\r\n\r\nconst save = ()=>{\r\n    context.$http.post('menu/update',{\r\n        id:1,\r\n        menujson:JSON.stringify(menus.value)\r\n    }).then(res=>{\r\n        if(res.data.code==0){\r\n            ElMessage.success('保存成功，重新登录后生效')\r\n        }\r\n    })\r\n}\r\n\r\nconst dialogVisible = ref(false)\r\nconst n_first_index = ref(null)     //选中的父级菜单\r\nconst o_index = ref(0)      //需要移动的二级菜单的index\r\nconst toMove = (t_index,index)=>{\r\n    first_index.value = t_index\r\n    n_first_index.value = t_index\r\n    o_index.value = index\r\n    dialogVisible.value = true\r\n}\r\nconst moveTo = ()=>{\r\n    let items = menus.value[role_index.value].backMenu[first_index.value].child.splice(o_index.value,1)\r\n    menus.value[role_index.value].backMenu[n_first_index.value].child.push(...items)\r\n    dialogVisible.value = false\r\n}\r\nconst changeName = (row,arr)=>{\r\n    ElMessageBox.prompt('请输入新菜单名','修改菜单名',{\r\n        inputValidator:(value)=>{\r\n            if(!value || !value.trim())return '请输入菜单名'\r\n            if(arr.find(item=>item.menu==value.trim())){\r\n                return '该菜单名已存在'\r\n            }\r\n        },\r\n    }).then(({value})=>{\r\n        row.menu = value.trim()\r\n    }).catch(()=>{})\r\n}\r\nconst moveUp = (arr,index)=>{\r\n    if(index==0)return\r\n    arr.splice(index-1,0, ...arr.splice(index,1))\r\n    arr = JSON.parse(JSON.stringify(arr))\r\n}\r\n\r\n</script>\r\n\r\n<style scoped lang=\"scss\">\r\n\r\n</style>"]},"metadata":{},"sourceType":"script","externalDependencies":[]}
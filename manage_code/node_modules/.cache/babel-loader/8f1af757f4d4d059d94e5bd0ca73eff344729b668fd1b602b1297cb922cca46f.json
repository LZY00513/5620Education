{"ast":null,"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"/Users/xinxiao/Desktop/education_ai/manage_code/node_modules/@babel/runtime/helpers/interopRequireDefault.js\")[\"default\"];\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\nrequire(\"core-js/modules/es.regexp.exec.js\");\nrequire(\"core-js/modules/es.string.replace.js\");\nrequire(\"core-js/modules/es.array.push.js\");\nrequire(\"core-js/modules/es.object.define-property.js\");\nvar _axios = _interopRequireDefault(require(\"axios\"));\nvar _moment = _interopRequireDefault(require(\"moment\"));\nvar _elementPlus = require(\"element-plus\");\nvar _vue = require(\"vue\");\nvar _vueRouter = require(\"vue-router\");\nvar _vuex = require(\"vuex\");\nvar _default = {\n  __name: 'indexTop',\n  props: {\n    collapse: Boolean\n  },\n  emits: ['collapseChange'],\n  setup: function setup(__props, _ref) {\n    var _getCurrentInstance;\n    var expose = _ref.expose,\n      emit = _ref.emit;\n    expose();\n    var props = __props;\n    var router = (0, _vueRouter.useRouter)();\n    var context = (_getCurrentInstance = (0, _vue.getCurrentInstance)()) === null || _getCurrentInstance === void 0 ? void 0 : _getCurrentInstance.appContext.config.globalProperties;\n    var role = context === null || context === void 0 ? void 0 : context.$toolUtil.storageGet('sessionTable');\n    var roleName = context === null || context === void 0 ? void 0 : context.$toolUtil.storageGet('role');\n    var _toRefs = (0, _vue.toRefs)(props),\n      collapse = _toRefs.collapse;\n\n    //获取用户信息\n    var store = (0, _vuex.useStore)();\n    var user = (0, _vue.computed)(function () {\n      return store.getters['user/session'];\n    });\n    var avatar = (0, _vue.ref)(store.state.user.avatar);\n    if (!store.state.user.session.id) {\n      store.dispatch('user/getSession');\n    }\n    var toggleClick = function toggleClick() {\n      emit('collapseChange');\n    };\n    // 退出登录\n    var onLogout = function onLogout() {\n      var toolUtil = context === null || context === void 0 ? void 0 : context.$toolUtil;\n      store.dispatch('delAllCachedViews');\n      store.dispatch('delAllVisitedViews');\n      toolUtil.storageClear();\n      router.replace({\n        name: \"login\"\n      });\n    };\n    // 跳转前台\n    var frontClick = function frontClick() {\n      window.location.href = \"\".concat(context === null || context === void 0 ? void 0 : context.$config.indexUrl);\n    };\n    // 个人中心\n    var centerClick = function centerClick() {\n      router.push(\"/\".concat(role, \"Center\"));\n    };\n    // 修改密码\n    var updatepasswordClick = function updatepasswordClick() {\n      router.push(\"/updatepassword\");\n    };\n    var __returned__ = {\n      router: router,\n      context: context,\n      emit: emit,\n      role: role,\n      roleName: roleName,\n      props: props,\n      collapse: collapse,\n      store: store,\n      user: user,\n      avatar: avatar,\n      toggleClick: toggleClick,\n      onLogout: onLogout,\n      frontClick: frontClick,\n      centerClick: centerClick,\n      updatepasswordClick: updatepasswordClick,\n      get axios() {\n        return _axios[\"default\"];\n      },\n      get moment() {\n        return _moment[\"default\"];\n      },\n      get ElMessageBox() {\n        return _elementPlus.ElMessageBox;\n      },\n      toRefs: _vue.toRefs,\n      getCurrentInstance: _vue.getCurrentInstance,\n      ref: _vue.ref,\n      onBeforeUnmount: _vue.onBeforeUnmount,\n      computed: _vue.computed,\n      get useRouter() {\n        return _vueRouter.useRouter;\n      },\n      get useRoute() {\n        return _vueRouter.useRoute;\n      },\n      get useStore() {\n        return _vuex.useStore;\n      }\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};\nexports[\"default\"] = _default;","map":{"version":3,"mappings":";;;;;;;;;;;AAwCC;AACG;AACH;AAGA;AASA;AAgBA;AAA+B;;;;;;;;;;;;IAZ/B,IAAMA,MAAM,GAAG,wBAAS,GAAE;IAC1B,IAAMC,OAAO,0BAAG,2BAAkB,GAAE,wDAApB,oBAAsBC,UAAU,CAACC,MAAM,CAACC,gBAAgB;IAExE,IAAMC,IAAI,GAAGJ,OAAO,aAAPA,OAAO,uBAAPA,OAAO,CAAEK,SAAS,CAACC,UAAU,CAAC,cAAc,CAAC;IAC1D,IAAMC,QAAQ,GAAGP,OAAO,aAAPA,OAAO,uBAAPA,OAAO,CAAEK,SAAS,CAACC,UAAU,CAAC,MAAM,CAAC;IAKtD,cAAmB,eAAM,EAACE,KAAK,CAAC;MAAzBC,QAAQ,WAARA,QAAQ;;IAEf;IAEA,IAAMC,KAAK,GAAG,kBAAQ,GAAE;IACxB,IAAMC,IAAI,GAAG,iBAAQ,EAAC;MAAA,OAAID,KAAK,CAACE,OAAO,CAAC,cAAc,CAAC;IAAA,EAAC;IACxD,IAAMC,MAAM,GAAG,YAAG,EAACH,KAAK,CAACI,KAAK,CAACH,IAAI,CAACE,MAAM,CAAC;IAC3C,IAAG,CAACH,KAAK,CAACI,KAAK,CAACH,IAAI,CAACI,OAAO,CAACC,EAAE,EAAC;MAC/BN,KAAK,CAACO,QAAQ,CAAC,iBAAiB,CAAC;IAClC;IACA,IAAMC,WAAW,GAAG,SAAdA,WAAW,GAAS;MACzBC,IAAI,CAAC,gBAAgB,CAAC;IACvB,CAAC;IACD;IACA,IAAMC,QAAQ,GAAG,SAAXA,QAAQ,GAAS;MACtB,IAAIC,QAAQ,GAAGrB,OAAO,aAAPA,OAAO,uBAAPA,OAAO,CAAEK,SAAS;MACjCK,KAAK,CAACO,QAAQ,CAAC,mBAAmB,CAAC;MACnCP,KAAK,CAACO,QAAQ,CAAC,oBAAoB,CAAC;MACpCI,QAAQ,CAACC,YAAY,EAAE;MACvBvB,MAAM,CAACwB,OAAO,CAAC;QACdC,IAAI,EAAE;MACP,CAAC,CAAC;IACH,CAAC;IACD;IACA,IAAMC,UAAU,GAAG,SAAbA,UAAU,GAAS;MACxBC,MAAM,CAACC,QAAQ,CAACC,IAAI,aAAM5B,OAAO,aAAPA,OAAO,uBAAPA,OAAO,CAAE6B,OAAO,CAACC,QAAQ,CAAE;IACtD,CAAC;IACD;IACA,IAAMC,WAAW,GAAG,SAAdA,WAAW,GAAS;MACzBhC,MAAM,CAACiC,IAAI,YAAK5B,IAAI,YAAS;IAC9B,CAAC;IACD;IACA,IAAM6B,mBAAmB,GAAG,SAAtBA,mBAAmB,GAAS;MACjClC,MAAM,CAACiC,IAAI,mBAAmB;IAC/B,CAAC","names":["router","context","appContext","config","globalProperties","role","$toolUtil","storageGet","roleName","props","collapse","store","user","getters","avatar","state","session","id","dispatch","toggleClick","emit","onLogout","toolUtil","storageClear","replace","name","frontClick","window","location","href","$config","indexUrl","centerClick","push","updatepasswordClick"],"sources":["/Users/xinxiao/Desktop/education_ai/manage_code/src/components/index/indexTop.vue"],"sourcesContent":["<template>\r\n\t<div class=\"top_view\">\r\n\t\t<div class=\"top_left_view\">\r\n\t\t\t<div class=\"fold_view\" @click=\"toggleClick\" :class=\"{'is_collapse':collapse}\">\r\n\t\t\t\t<el-switch :value=\"collapse\" :active-value=\"false\" :inactive-value=\"true\"></el-switch>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\r\n\t\t<div class=\"projectTitle\">在线学习教育平台</div>\r\n\t\t<div class=\"top_right_view\">\r\n\t\t\t<el-dropdown class=\"avatar-container\" trigger=\"hover\">\r\n\t\t\t\t<div class=\"avatar-wrapper\">\r\n\t\t\t\t\t<div class=\"nickname\">{{$toolUtil.storageGet(\"adminName\")}}</div>\r\n\t\t\t\t\t<img class=\"user-avatar\" :src=\"store.getters['user/avatar']\">\r\n\t\t\t\t\t<el-icon class=\"el-icon-arrow-down\">\r\n\t\t\t\t\t\t<arrow-down />\r\n\t\t\t\t\t</el-icon>\r\n\t\t\t\t</div>\r\n\t\t\t\t<template #dropdown>\r\n\t\t\t\t\t<el-dropdown-menu class=\"user-dropDown\" slot=\"dropdown\">\r\n\t\t\t\t\t\t<el-dropdown-item @click=\"centerClick\" >\r\n\t\t\t\t\t\t\t个人中心\r\n\t\t\t\t\t\t</el-dropdown-item>\r\n\t\t\t\t\t\t<el-dropdown-item @click=\"updatepasswordClick\">\r\n\t\t\t\t\t\t\t修改密码\r\n\t\t\t\t\t\t</el-dropdown-item>\r\n\t\t\t\t\t\t<el-dropdown-item v-if=\"roleName!='管理员'\">\r\n\t\t\t\t\t\t\t<span style=\"display:block;\" @click=\"frontClick\">系统前台</span>\r\n\t\t\t\t\t\t</el-dropdown-item>\r\n\t\t\t\t\t\t<el-dropdown-item>\r\n\t\t\t\t\t\t\t<span style=\"display:block;\" @click=\"onLogout\">退出登录</span>\r\n\t\t\t\t\t\t</el-dropdown-item>\r\n\t\t\t\t\t</el-dropdown-menu>\r\n\t\t\t\t</template>\r\n\t\t\t</el-dropdown>\r\n\t\t</div>\r\n\t</div>\r\n</template>\r\n\r\n<script setup>\r\n\timport axios from 'axios'\r\n    import moment from \"moment\"\r\n\timport {\r\n\t\tElMessageBox\r\n\t} from 'element-plus'\r\n\timport {\r\n\t\ttoRefs,\r\n\t\tdefineEmits,\r\n\t\tgetCurrentInstance,\r\n\t\tref,\r\n\t\tonBeforeUnmount,\r\n\t\tcomputed,\r\n\t} from 'vue';\r\n\r\n\timport {\r\n\t\tuseRouter,\r\n\t\tuseRoute\r\n\t} from 'vue-router';\r\n\tconst router = useRouter()\r\n\tconst context = getCurrentInstance()?.appContext.config.globalProperties;\r\n\tconst emit = defineEmits(['collapseChange'])\r\n\tconst role = context?.$toolUtil.storageGet('sessionTable')\r\n\tconst roleName = context?.$toolUtil.storageGet('role')\r\n\r\n\tconst props = defineProps({\r\n\t\tcollapse: Boolean\r\n\t})\r\n\tconst {collapse} = toRefs(props)\r\n\r\n\t//获取用户信息\r\n\timport { useStore } from 'vuex'\r\n\tconst store = useStore()\r\n\tconst user = computed(()=>store.getters['user/session'])\r\n\tconst avatar = ref(store.state.user.avatar)\r\n\tif(!store.state.user.session.id){\r\n\t\tstore.dispatch('user/getSession')\r\n\t}\r\n\tconst toggleClick = () => {\r\n\t\temit('collapseChange')\r\n\t}\r\n\t// 退出登录\r\n\tconst onLogout = () => {\r\n\t\tlet toolUtil = context?.$toolUtil\r\n\t\tstore.dispatch('delAllCachedViews')\r\n\t\tstore.dispatch('delAllVisitedViews')\r\n\t\ttoolUtil.storageClear()\r\n\t\trouter.replace({\r\n\t\t\tname: \"login\"\r\n\t\t});\r\n\t}\r\n\t// 跳转前台\r\n\tconst frontClick = () => {\r\n\t\twindow.location.href = `${context?.$config.indexUrl}`\r\n\t}\r\n\t// 个人中心\r\n\tconst centerClick = () => {\r\n\t\trouter.push(`/${role}Center`)\r\n\t}\r\n\t// 修改密码\r\n\tconst updatepasswordClick = () => {\r\n\t\trouter.push(`/updatepassword`)\r\n\t}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n\t// 总盒子\r\n\t.top_view {\r\n\t\t// 左边盒子\r\n\t\t.top_left_view {\r\n\t\t\t// 折叠按钮盒子\r\n\t\t\t.fold_view {\r\n\t\t\t\tpadding: 0 15px;\r\n\t\t\t\t// 图标\r\n\t\t\t\t.icons {\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\t// 标题\r\n\t\t.projectTitle{\r\n\t\t}\r\n\t\t// 右部盒子\r\n\t\t.top_right_view{\r\n\t\t\t// 头像盒子\r\n\t\t\t.avatar-container {\r\n\t\t\t\t.avatar-wrapper {\r\n\t\t\t\t\t// 昵称\r\n\t\t\t\t\t.nickname {\r\n\t\t\t\t\t}\r\n\t\t\t\t\t// 头像\r\n\t\t\t\t\t.user-avatar {\r\n\t\t\t\t\t}\r\n\t\t\t\t\t// 图标\r\n\t\t\t\t\t.el-icon-arrow-down {\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\t// 下拉盒子\r\n\t.el-dropdown-menu{\r\n\t\tbackground: #fff;\r\n\t\tmin-width: 110px;\r\n\t\t// 下拉盒子itme\r\n\t\t:deep(.el-dropdown-menu__item){\r\n\t\t\tcolor: #666;\r\n\t\t\tbackground: #fff;\r\n\t\t}\r\n\t\t// item悬浮\r\n\t\t:deep(.el-dropdown-menu__item:hover){\r\n\t\t\tcolor: #000;\r\n\t\t\tbackground: none;\r\n\t\t}\r\n\t}\r\n</style>\r\n<style>\r\n/*总盒子*/\n.top_view{ \n    background: #7282a4;\n    height: 90px;\n    width: 100%;\n    display: flex;\n    align-items: center;\n    justify-content: flex-end;\n    position: fixed;\n    left: 0px;\n    top: 0px;\n    z-index: 9;\n    padding: 0px;\n    border-width: 0 0 2px;\n    border-style: solid;\n    border-color: #9fa8bd;\n    font-size:16px;\n}\n/*标题*/\n.top_view .projectTitle{\n    font-size: 20px;\n    margin: 0px;\n    padding: 0px 0px 0px 40px;\n    line-height: 1;\n    width: auto;\n    font-weight: 600;\n    color:#fff; \n    background:none;\n    text-align:left;\n    text-shadow:0 -2px 0 rgba(0, 0, 0, 0.25);\n    letter-spacing: 1px;\n    order:-1;\n    position:absolute;\n    left:0px;\n}\n\n/*左边盒子*/\n.top_left_view{\n    width: auto !important;\n    color:#fff; \n}\n/*总盒子*/\n.top_left_view .weather_time_view{\n    display: flex;\n    align-items: center;\n}\n/*天气盒子*/\n.top_left_view .weather_time_view .weather{\n    padding: 0px 10px;\n    border-image: initial;\n    display: flex;\n    align-items: center;\n    line-height: 1;\n    margin-right: 30px;\n}\n.top_left_view .weather_time_view .weather .city{\n    display: inline-block;\n    white-space: nowrap;\n}\n.top_left_view .weather_time_view .weather .wea{\n    display: inline-block;\n    white-space: nowrap;\n}\n/*时间盒子*/\n.top_left_view .weather_time_view .time{\n    display: flex;\n    align-items: center;\n    padding: 0px 10px;\n    margin-right: 30px;\n}\n.top_left_view .weather_time_view .time .date{\n    display: inline-block;\n    white-space: nowrap;\n    margin: 0px 10px 0px 0px\n}\n.top_left_view .weather_time_view .time .timer{\n    display: inline-block;\n    white-space: nowrap;\n    line-height: 1;\n}\n\n/*折叠按钮*/\n.top_left_view .fold_view{\n    display: none;\n    padding: 0px;\n    margin: 0px 0px 0px 40px;\n    background: none;\n    border-radius: 50%;\n    width: 32px;\n    height: 32px;\n    align-items: center;\n    justify-content: center;\n }\n.top_left_view .fold_view:hover {\n }\n/*图标*/\n.top_left_view .fold_view .icons{\n    font-size: 24px;\n    color: rgb(255, 255, 255);\n}\n\n/*系统公告*/\n.top_view .notice-btn{\n    background: rgba(255, 255, 255,0);\n    border-color: rgba(255, 255, 255,0);\n    padding: 0 10px;\n    margin-right:20px;\n    height: 44px;\n    line-height: 44px;\n    font-size: inherit;\n    color:#fff; \n    border-radius:30px;\n}\n.top_view .notice-btn:hover{\n    color:#fff; \n}\n.top_view .notice-btn .iconfont{\n    font-size: inherit;\n}\n\n/*右边盒子*/\n/*无下拉操作栏*/\n.top_right_view{\n    width: auto;\n    height: 100%;\n    display: flex;\n    align-items: center;\n    justify-content: flex-end;\n    order: 3;\n    min-width: 300px;\n }\n.top_right_view .actionBar{ }\n.top_right_view .actionBar .item { float:left; margin-right:20px; margin-bottom:5px; font-size:16px; color:#fff; font-weight:500;  }\n.top_right_view .actionBar .item:hover { color:#fff; cursor:pointer;  }\n.top_right_view .actionBar .item i { font-size:18px; }\n\n.top_view .user-info{\n    position:absolute;\n    left:20px;\n    display: flex;\n    align-items: center;\n}\n.top_view .user-info .img-wrapper{\n    margin-right:10px;\n}\n.top_view .user-info .img-wrapper .user-avatar{\n    width:50px;\n}\n.top_view .user-info .nickname{\n    font-size:16px;\n    color:#fff; \n    white-space:nowrap;\n}\n\n/*头像下拉 默认*/\n/*头像盒子*/\n.top_right_view .el-dropdown{\n    height: 50px;\n    margin: 0px 30px 0px 0px;\n    cursor: pointer;\n    color: rgb(255, 255, 255);\n    display: flex;\n    align-items: center;\n}\n/*item*/\n.top_right_view .el-dropdown .avatar-wrapper{\n    margin: 5px 0px 0px;\n    position: relative;\n    display: flex;\n    align-items: center;\n}\n/*昵称*/\n.top_right_view .el-dropdown .avatar-wrapper .nickname{\n    cursor: pointer;\n    margin: 0px 5px;\n    line-height: 44px;\n    color: rgb(255, 255, 255);\n    font-size:16px;\n    white-space:nowrap;\n    order:2;\n}\n/*头像*/\n.top_right_view .el-dropdown .avatar-wrapper .user-avatar{\n    cursor: pointer;\n    width: 40px;\n    height: 40px;\n    border-radius: 30px;\n}\n/*图标*/\n.top_right_view .el-dropdown .avatar-wrapper .el-icon{\n    color: rgb(255, 255, 255);\n    order:3;\n}\n\r\n</style>"]},"metadata":{},"sourceType":"script","externalDependencies":[]}